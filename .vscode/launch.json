{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Debug Lambda via SAM CLI",
            "type": "go",
            "request": "attach",
            // Connect to the port specified in tasks.json (5858)
            "port": 5858,
            "host": "127.0.0.1",
            // Run the SAM command (build and invoke) defined in tasks.json before attempting to attach
            "preLaunchTask": "sam-build-and-debug-go",
            // Clean up the running SAM process after the debugging session ends
            "postDebugTask": "terminate-sam-session"
        },
        {
            // You can keep the old one for reference, but it won't work with lambda.Start()
            "name": "Debug Lambda (Go Local Mode - Old)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "program": "${workspaceFolder}/main.go",
            "env": {
                "AWS_REGION": "us-west-2",
                "AWS_LAMBDA_FUNCTION_NAME": "MyLocalFunction",
                "IS_LOCAL_DEBUG": "true",
                "_LAMBDA_SERVER_PORT": "12345",
                "AWS_LAMBDA_RUNTIME_API": "localhost:9000"
            },
            "args": ["${workspaceFolder}/event.json"]
        }
    ]
}
